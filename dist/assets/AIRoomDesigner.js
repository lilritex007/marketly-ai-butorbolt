import{c as U,j as e,o as V,X as K,S as W,L as q,C as G,p as H,q as _,r as X,u as Q,v as Y,w as ee}from"./index.js";import{r as h}from"./vendor.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=U("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=U("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),le=({products:m,onProductRecommendations:k,onClose:A})=>{const[E,I]=h.useState(null),[j,M]=h.useState(null),[P,T]=h.useState(!1),[N,v]=h.useState(null),[C,b]=h.useState(null),[y,w]=h.useState([]),[O,z]=h.useState([]),R=h.useRef(null),g=h.useMemo(()=>{if(!(m!=null&&m.length))return null;const s={};m.forEach(c=>{const i=(c.category||"Egy√©b").split(" > ")[0];s[i]=(s[i]||0)+1});const a=Object.entries(s).sort((c,i)=>i[1]-c[1]).slice(0,8).map(([c])=>c);return{total:m.length,topCategories:a}},[m]),Z=s=>{var c;const a=(c=s.target.files)==null?void 0:c[0];if(a&&a.type.startsWith("image/")){if(a.size>4*1024*1024){b("A k√©p t√∫l nagy! Maximum 4MB enged√©lyezett.");return}I(a),b(null),v(null),w([]),z([]);const i=new FileReader;i.onloadend=()=>{M(i.result)},i.readAsDataURL(a)}},B=async()=>{if(!(!E||!j)){T(!0),v(null),b(null),w([]),z([]);try{const s=j.split(",")[1],a=E.type||"image/jpeg",i=await Y(s,a,`Elemezd r√©szletesen ezt a szobafot√≥t √©s adj b√∫tor aj√°nl√°sokat!

ELEMEZD:
1. Szoba t√≠pusa (nappali, h√°l√≥szoba, √©tkez≈ë, iroda, stb.)
2. Jelenlegi st√≠lus (modern, skandin√°v, klasszikus, minimalista, stb.)
3. Domin√°ns sz√≠nek
4. Milyen b√∫torok hi√°nyoznak vagy cser√©lend≈ëk

V√ÅLASZOD FORM√ÅTUMA (pontosan ezt k√∂vesd!):
SZOBA: [szoba t√≠pusa]
ST√çLUS: [st√≠lus neve]
SZ√çNEK: [2-3 sz√≠n]
AJ√ÅNLOTT_B√öTOROK: [b√∫tor1], [b√∫tor2], [b√∫tor3], [b√∫tor4]
TIPP: [1 mondat szem√©lyre szabott tan√°cs magyarul, tegezve]`);if(i.success&&i.text){const d=i.text,f=[],u=d.match(/SZOBA:\s*(.+)/i),r=d.match(/ST√çLUS:\s*(.+)/i),x=d.match(/SZ√çNEK:\s*(.+)/i),t=d.match(/AJ√ÅNLOTT_B√öTOROK:\s*(.+)/i),n=d.match(/TIPP:\s*(.+)/i);u&&f.push(...u[1].toLowerCase().split(/[,\s]+/).filter(p=>p.length>2)),r&&f.push(...r[1].toLowerCase().split(/[,\s]+/).filter(p=>p.length>2)),x&&f.push(...x[1].toLowerCase().split(/[,\s]+/).filter(p=>p.length>2)),t&&f.push(...t[1].toLowerCase().split(/[,\s]+/).filter(p=>p.length>2)),z(f);let l="";u&&(l+=`üìç **Szoba:** ${u[1].trim()}
`),r&&(l+=`üé® **St√≠lus:** ${r[1].trim()}
`),x&&(l+=`üéØ **Sz√≠nvil√°g:** ${x[1].trim()}
`),t&&(l+=`üõãÔ∏è **Aj√°nlott b√∫torok:** ${t[1].trim()}
`),n&&(l+=`
üí° ${n[1].trim()}`),l||(l=d),v(l);const o=D(f,(t==null?void 0:t[1])||"");w(o),k&&o.length>0&&k(o)}else b(i.error||"Nem siker√ºlt elemezni a k√©pet.")}catch(s){console.error("K√©pelemz√©s hiba:",s),b("V√°ratlan hiba t√∂rt√©nt. Pr√≥b√°lj m√°sik k√©pet!")}finally{T(!1)}}},D=(s,a)=>{if(!m||m.length===0)return[];const c={kanap√©:["kanap√©","√ºl≈ëgarnit√∫ra","sofa","sz√≥fa","sarok√ºl≈ë","hever≈ë"],fotel:["fotel","karossz√©k","pihen≈ëfotel","relax fotel"],asztal:["asztal","doh√°nyz√≥asztal","√©tkez≈ëasztal","√≠r√≥asztal","konzolasztal"],sz√©k:["sz√©k","√©tkez≈ësz√©k","forg√≥sz√©k","irodai sz√©k"],√°gy:["√°gy","francia√°gy","boxspring","h√°l√≥szoba"],szekr√©ny:["szekr√©ny","gardr√≥b","kom√≥d","t√°lal√≥","vitrin"],polc:["polc","k√∂nyvespolc","falipolc","√°llv√°ny"],l√°mpa:["l√°mpa","vil√°g√≠t√°s","√°ll√≥l√°mpa","asztali l√°mpa"]},i={modern:["modern","minimalista","kort√°rs","letisztult","egyszer≈±"],skandin√°v:["skandin√°v","nordic","nat√∫r","vil√°gos","feh√©r","fa"],klasszikus:["klasszikus","eleg√°ns","tradicion√°lis","id≈ëtlen"],indusztri√°lis:["indusztri√°lis","loft","ipari","f√©m","vas"],vintage:["vintage","retro","antik","r√©gi"]},d=new Set;s.forEach(t=>{d.add(t.toLowerCase()),Object.entries(c).forEach(([n,l])=>{(t.toLowerCase().includes(n)||l.some(o=>t.toLowerCase().includes(o)))&&l.forEach(o=>d.add(o))}),Object.entries(i).forEach(([n,l])=>{l.some(o=>t.toLowerCase().includes(o))&&l.forEach(o=>d.add(o))})}),a&&a.toLowerCase().split(/[,\s]+/).forEach(t=>{t.length>2&&d.add(t)});const u=m.map(t=>{const n=`${t.name||""} ${t.category||""} ${t.description||""}`.toLowerCase();let l=0;return d.forEach(o=>{n.includes(o)&&((t.name||"").toLowerCase().includes(o)?l+=15:(t.category||"").toLowerCase().includes(o)?l+=10:l+=3)}),{product:t,score:l}}).filter(t=>t.score>0).sort((t,n)=>n.score-t.score),r=[],x=new Set;for(const t of u){const n=(t.product.category||"").split(" > ")[0];if(r.length<4||r.length<12&&!x.has(n)?(r.push(t.product),x.add(n)):r.length<12&&r.push(t.product),r.length>=12)break}if(r.length<6){const t=m.filter(n=>!r.some(l=>l.id===n.id)).sort(()=>Math.random()-.5).slice(0,6-r.length);r.push(...t)}return r},S=()=>{I(null),M(null),v(null),b(null),w([]),z([])},L=()=>{S(),A&&A()},F=s=>{ee(s),k&&k([s,...y.filter(a=>a.id!==s.id)])},J=s=>(s||0).toLocaleString("hu-HU")+" Ft";return e.jsx("div",{className:"fixed inset-0 lg:top-[60px] z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:L,children:e.jsxs("div",{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white rounded-2xl shadow-2xl",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-100 bg-gradient-to-r from-secondary-500 to-pink-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl",children:e.jsx(V,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"AI Szoba Tervez≈ë"}),e.jsx("p",{className:"text-sm text-white/80",children:g?`${g.total.toLocaleString()} term√©kb≈ël v√°logatunk`:"T√∂ltsd fel a szob√°d fot√≥j√°t!"})]})]}),e.jsx("button",{onClick:L,className:"p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-full transition-colors",children:e.jsx(K,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-5",children:[!j&&e.jsxs("div",{onClick:()=>{var s;return(s=R.current)==null?void 0:s.click()},className:"border-2 border-dashed border-gray-300 rounded-xl p-10 text-center cursor-pointer hover:border-secondary-500 hover:bg-secondary-50/30 transition-all",children:[e.jsx($,{className:"w-14 h-14 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Kattints vagy h√∫zd ide a fot√≥t"}),e.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG vagy WEBP (max 4MB)"}),e.jsxs("p",{className:"text-xs text-secondary-700 mt-2",children:["Az AI elemzi a szob√°t √©s ",(g==null?void 0:g.total.toLocaleString())||""," term√©kb≈ël aj√°nl"]}),e.jsx("input",{ref:R,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:Z,className:"hidden"})]}),j&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"relative rounded-xl overflow-hidden",children:[e.jsx("img",{src:j,alt:"Szoba el≈ën√©zet",className:"w-full h-56 object-cover"}),e.jsx("button",{onClick:S,className:"absolute top-3 right-3 p-2 bg-white/90 rounded-full hover:bg-white transition-colors shadow-lg",children:e.jsx(K,{className:"w-5 h-5 text-gray-700"})})]}),!N&&!P&&!C&&e.jsxs("button",{onClick:B,className:"w-full py-4 rounded-xl bg-gradient-to-r from-secondary-500 to-pink-600 text-white font-semibold text-lg shadow-lg hover:shadow-xl transition-all hover:scale-[1.02] flex items-center justify-center gap-3",children:[e.jsx(W,{className:"w-6 h-6"}),"AI Elemz√©s Ind√≠t√°sa"]}),P&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{className:"w-12 h-12 text-secondary-500 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Az AI elemzi a szob√°dat..."}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[g==null?void 0:g.total.toLocaleString()," term√©kb≈ël keress√ºk a t√∂k√©leteset"]})]}),C&&e.jsxs("div",{className:"bg-red-50 rounded-xl p-5 text-center",children:[e.jsx(G,{className:"w-10 h-10 text-red-500 mx-auto mb-3"}),e.jsx("p",{className:"text-red-700 font-medium mb-4",children:C}),e.jsxs("button",{onClick:B,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors inline-flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),"√öjrapr√≥b√°l√°s"]})]}),N&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-gradient-to-br from-secondary-50 to-pink-50 rounded-xl p-5 border border-secondary-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(H,{className:"w-5 h-5 text-green-500"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"AI Elemz√©s"})]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed text-sm",children:N.split(`
`).map((s,a)=>s.startsWith("üí°")?e.jsx("div",{className:"mt-3 p-3 bg-amber-50 rounded-lg border border-amber-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-amber-500 shrink-0"}),e.jsx("p",{className:"text-amber-800",children:s.replace("üí° ","")})]})},a):e.jsx("p",{children:s},a))})]}),O.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:O.slice(0,8).map((s,a)=>e.jsx("span",{className:"px-2.5 py-1 bg-secondary-100 text-secondary-700 text-xs rounded-full",children:s},a))}),y.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-amber-500"}),"Szem√©lyre szabott aj√°nlatok (",y.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:y.slice(0,6).map(s=>{var a;return e.jsxs("button",{onClick:()=>F(s),className:"bg-white rounded-lg overflow-hidden border border-gray-200 hover:shadow-md hover:border-secondary-400 transition-all text-left",children:[e.jsx("img",{src:((a=s.images)==null?void 0:a[0])||s.image||s.mainImage,alt:s.name,className:"w-full h-28 object-contain bg-gray-50",onError:c=>{c.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%23f3f4f6" width="100" height="100"/></svg>'}}),e.jsxs("div",{className:"p-2.5",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-800 line-clamp-1 mb-1",children:s.name}),e.jsx("p",{className:"text-base font-bold text-secondary-700",children:J(s.salePrice||s.price)})]})]},s.id)})}),y.length>6&&e.jsxs("p",{className:"text-center text-sm text-gray-500 mt-3",children:["+ ",y.length-6," tov√°bbi aj√°nlat"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:S,className:"py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"√öj Fot√≥"]}),e.jsxs("button",{onClick:L,className:"py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-pink-600 text-white font-semibold hover:opacity-90 transition-opacity flex items-center justify-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),"Megn√©zem"]})]})]})]})]})]})})};export{le as default};
//# sourceMappingURL=AIRoomDesigner.js.map
