{"version":3,"file":"ProductCarousel.js","sources":["../../src/components/ui/ProductCarousel.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\n\nconst getScrollStep = (container) => {\n  if (!container) return 320;\n  const first = container.firstElementChild;\n  if (!first) return 320;\n  const rect = first.getBoundingClientRect();\n  const gap = parseFloat(getComputedStyle(container).columnGap || '16');\n  return Math.max(260, rect.width + gap);\n};\n\nconst ProductCarousel = ({\n  children,\n  autoScroll = true,\n  intervalMs = 5200,\n  stepFraction = 1,\n  className = '',\n  onInteractionChange,\n  cardSize = 'default',\n  desktopColumns, // override: 6 = 6 kÃ¡rtya/sor desktopon (pl. Worlds)\n}) => {\n  const containerRef = useRef(null);\n  const [paused, setPaused] = useState(false);\n  const interactionTimeoutRef = useRef(null);\n\n  useEffect(() => {\n    if (!autoScroll || paused) return undefined;\n    const container = containerRef.current;\n    if (!container) return undefined;\n    const step = getScrollStep(container) * stepFraction;\n    const id = setInterval(() => {\n      const maxScroll = container.scrollWidth - container.clientWidth;\n      const next = container.scrollLeft + step;\n      if (next >= maxScroll - 5) {\n        container.scrollTo({ left: 0, behavior: 'smooth' });\n      } else {\n        container.scrollBy({ left: step, behavior: 'smooth' });\n      }\n    }, intervalMs);\n    return () => clearInterval(id);\n  }, [autoScroll, paused, intervalMs]);\n\n  const scrollByStep = (direction) => {\n    const container = containerRef.current;\n    if (!container) return;\n    const step = getScrollStep(container) * stepFraction;\n    container.scrollBy({ left: step * direction, behavior: 'smooth' });\n  };\n\n  return (\n    <div className={`relative ${className}`}>\n      <button\n        type=\"button\"\n        onClick={() => scrollByStep(-1)}\n        className=\"absolute left-1 sm:left-2 top-1/2 -translate-y-1/2 z-10 w-10 h-10 rounded-full bg-white shadow-md border border-gray-100 flex items-center justify-center hover:bg-gray-50\"\n        aria-label=\"Balra\"\n      >\n        <ChevronLeft className=\"w-5 h-5 text-gray-700\" />\n      </button>\n      <button\n        type=\"button\"\n        onClick={() => scrollByStep(1)}\n        className=\"absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 z-10 w-10 h-10 rounded-full bg-white shadow-md border border-gray-100 flex items-center justify-center hover:bg-gray-50\"\n        aria-label=\"Jobbra\"\n      >\n        <ChevronRight className=\"w-5 h-5 text-gray-700\" />\n      </button>\n      <div\n        ref={containerRef}\n        onMouseEnter={() => {\n          setPaused(true);\n          onInteractionChange?.(true);\n        }}\n        onMouseLeave={() => {\n          setPaused(false);\n          onInteractionChange?.(false);\n        }}\n        onPointerDown={() => {\n          setPaused(true);\n          onInteractionChange?.(true);\n          if (interactionTimeoutRef.current) clearTimeout(interactionTimeoutRef.current);\n          interactionTimeoutRef.current = setTimeout(() => {\n            setPaused(false);\n            onInteractionChange?.(false);\n          }, 4000);\n        }}\n        onFocusCapture={() => {\n          setPaused(true);\n          onInteractionChange?.(true);\n        }}\n        onBlurCapture={() => {\n          setPaused(false);\n          onInteractionChange?.(false);\n        }}\n        className=\"flex gap-4 overflow-x-auto scroll-smooth pb-3 snap-x snap-mandatory scrollbar-hide\"\n      >\n        {React.Children.map(children, (child, index) => {\n          const lgCols6 = 'lg:min-w-[calc((100%-80px)/6)]';\n          const lgCols5 = 'lg:min-w-[calc((100%-80px)/5)]';\n          const use6cols = desktopColumns === 6 || (cardSize !== 'large' && !desktopColumns);\n          const lgClass = use6cols ? lgCols6 : lgCols5;\n          return (\n            <div\n              key={index}\n              className={`snap-start ${cardSize === 'large' ? `min-w-[220px] sm:min-w-[260px] ${lgClass}` : `min-w-[170px] sm:min-w-[200px] ${lgClass}`}`}\n            >\n              {child}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default ProductCarousel;\n"],"names":["getScrollStep","container","first","rect","gap","ProductCarousel","children","autoScroll","intervalMs","stepFraction","className","onInteractionChange","cardSize","desktopColumns","containerRef","useRef","paused","setPaused","useState","interactionTimeoutRef","useEffect","step","id","maxScroll","scrollByStep","direction","jsxs","jsx","ChevronLeft","ChevronRight","child","index","lgClass"],"mappings":"oFAGA,MAAMA,EAAiBC,GAAc,CACnC,GAAI,CAACA,EAAW,MAAO,KACvB,MAAMC,EAAQD,EAAU,kBACxB,GAAI,CAACC,EAAO,MAAO,KACnB,MAAMC,EAAOD,EAAM,sBAAA,EACbE,EAAM,WAAW,iBAAiBH,CAAS,EAAE,WAAa,IAAI,EACpE,OAAO,KAAK,IAAI,IAAKE,EAAK,MAAQC,CAAG,CACvC,EAEMC,EAAkB,CAAC,CACvB,SAAAC,EACA,WAAAC,EAAa,GACb,WAAAC,EAAa,KACb,aAAAC,EAAe,EACf,UAAAC,EAAY,GACZ,oBAAAC,EACA,SAAAC,EAAW,UACX,eAAAC,CACF,IAAM,CACJ,MAAMC,EAAeC,EAAAA,OAAO,IAAI,EAC1B,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,EAAK,EACpCC,EAAwBJ,EAAAA,OAAO,IAAI,EAEzCK,EAAAA,UAAU,IAAM,CACd,GAAI,CAACb,GAAcS,EAAQ,OAC3B,MAAMf,EAAYa,EAAa,QAC/B,GAAI,CAACb,EAAW,OAChB,MAAMoB,EAAOrB,EAAcC,CAAS,EAAIQ,EAClCa,EAAK,YAAY,IAAM,CAC3B,MAAMC,EAAYtB,EAAU,YAAcA,EAAU,YACvCA,EAAU,WAAaoB,GACxBE,EAAY,EACtBtB,EAAU,SAAS,CAAE,KAAM,EAAG,SAAU,SAAU,EAElDA,EAAU,SAAS,CAAE,KAAMoB,EAAM,SAAU,SAAU,CAEzD,EAAGb,CAAU,EACb,MAAO,IAAM,cAAcc,CAAE,CAC/B,EAAG,CAACf,EAAYS,EAAQR,CAAU,CAAC,EAEnC,MAAMgB,EAAgBC,GAAc,CAClC,MAAMxB,EAAYa,EAAa,QAC/B,GAAI,CAACb,EAAW,OAChB,MAAMoB,EAAOrB,EAAcC,CAAS,EAAIQ,EACxCR,EAAU,SAAS,CAAE,KAAMoB,EAAOI,EAAW,SAAU,SAAU,CACnE,EAEA,OACEC,EAAAA,KAAC,MAAA,CAAI,UAAW,YAAYhB,CAAS,GACnC,SAAA,CAAAiB,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMH,EAAa,EAAE,EAC9B,UAAU,6KACV,aAAW,QAEX,SAAAG,EAAAA,IAACC,EAAA,CAAY,UAAU,uBAAA,CAAwB,CAAA,CAAA,EAEjDD,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMH,EAAa,CAAC,EAC7B,UAAU,+KACV,aAAW,SAEX,SAAAG,EAAAA,IAACE,EAAA,CAAa,UAAU,uBAAA,CAAwB,CAAA,CAAA,EAElDF,EAAAA,IAAC,MAAA,CACC,IAAKb,EACL,aAAc,IAAM,CAClBG,EAAU,EAAI,EACdN,GAAA,MAAAA,EAAsB,GACxB,EACA,aAAc,IAAM,CAClBM,EAAU,EAAK,EACfN,GAAA,MAAAA,EAAsB,GACxB,EACA,cAAe,IAAM,CACnBM,EAAU,EAAI,EACdN,GAAA,MAAAA,EAAsB,IAClBQ,EAAsB,SAAS,aAAaA,EAAsB,OAAO,EAC7EA,EAAsB,QAAU,WAAW,IAAM,CAC/CF,EAAU,EAAK,EACfN,GAAA,MAAAA,EAAsB,GACxB,EAAG,GAAI,CACT,EACA,eAAgB,IAAM,CACpBM,EAAU,EAAI,EACdN,GAAA,MAAAA,EAAsB,GACxB,EACA,cAAe,IAAM,CACnBM,EAAU,EAAK,EACfN,GAAA,MAAAA,EAAsB,GACxB,EACA,UAAU,qFAET,WAAM,SAAS,IAAIL,EAAU,CAACwB,EAAOC,IAAU,CAI9C,MAAMC,EADWnB,IAAmB,GAAMD,IAAa,SAAW,CAACC,EAFnD,iCACA,iCAGhB,OACEc,EAAAA,IAAC,MAAA,CAEC,UAAW,cAAcf,IAAa,QAAU,kCAAkCoB,CAAO,GAAK,kCAAkCA,CAAO,EAAE,GAExI,SAAAF,CAAA,EAHIC,CAAA,CAMX,CAAC,CAAA,CAAA,CACH,EACF,CAEJ"}